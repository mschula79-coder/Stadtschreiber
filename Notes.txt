overpass queries

[out:json][timeout:25];

// Basel-Stadt Fläche finden
area["name"="Basel-Stadt"]["boundary"="administrative"]->.bs;

// Stadtteile (Quartiere) innerhalb Basel-Stadt
(
  relation["boundary"="administrative"]["admin_level"="10"](area.bs);
);

out geom;


Map Style:
red: 
rgba(255, 189, 189, 0.8)

blue:
rgba(189, 246, 255, 1)

Maps made with these vector tiles must display a visible credit:
- ┬® OpenMapTiles ┬® OpenStreetMap contributors
Thanks to all free, open source software developers and Open Data Contributors!
adb pair 192.168.1.5:40691
adb connect 192.168.1.5:40691

cd C:\Planetiler .\build-basel.ps1

.\martin.exe basel_50km.mbtiles

cd /mnt/c/planetiler
python3 -m http.server 8000 --bind 0.0.0.0

in WSL get the connectadress:
hostname -I
(powershell admin)

netsh interface portproxy reset

netsh interface portproxy add v4tov4 listenport=8000 listenaddress=0.0.0.0 connectport=8000 connectaddress=172.30.136.88 

verifiy:
netsh interface portproxy show all

Skript to run python server

wsl:
nano ~/start_python.sh

notepad C:\portproxy\setup_portproxy.ps1

reboot sequence:
wsl
./start_python.sh
powershell admin
C:\portproxy\setup_portproxy.ps1  
nano /home/maiks/start_python.sh    
output:
Detected WSL IP: 172.30.xxx.xxx
Resetting portproxy rules...
Adding new portproxy rule...
Current portproxy rules:
0.0.0.0:8000   172.30.xxx.xxx:8000
Done.
test:http://localhost:8000/baselparks.geojson
phone: http://192.168.1.6:8000/baselparks.geojson

portproxy rule:
netsh interface portproxy show v4tov4
-> update IP from this  
netsh interface portproxy add v4tov4 listenport=9000 listenaddress=0.0.0.0 connectport=9000 connectaddress=172.30.136.88

Hetzner
connect:
ssh root@88.99.170.209
upload:
scp /mnt/c/Users/maiks/Downloads/export.sql root@88.99.170.209:/root/

import nach Supabase


wsl
cd /mnt/c/Planetiler

  cd ~/basel_osm
./run_export_upload_import.sh


osmium merge \
  switzerland-latest.osm.pbf \
  baden-wuerttemberg-latest.osm.pbf \
  alsace-latest.osm.pbf \
  -o basel-region.osm.pbf


scp basel-region.mbtiles root@stadtschreiber.duckdns.org:/opt/tiles/
scp style.json root@stadtschreiber.duckdns.org:/opt/tiles/
scp -r fonts root@stadtschreiber.duckdns.org:/opt/tiles/
scp -r sprites root@stadtschreiber.duckdns.org:/opt/tiles/

flutter build appbundle --release    

1. Folder Structure (on host: /opt/tiles)

/opt/tiles
  basel-region.mbtiles
  style.json
  config.json
  sprites/
      sprite.png
      sprite.json
      sprite@2x.png
      sprite@2x.json
  fonts/
  styles/   ← optional, not used by Tileserver unless referenced
2. Tileserver‑GL Docker Compose Service

    Runs on port 8080 inside the container

    Traefik forwards HTTPS traffic to it

    Mounted volume:
    Code

    /opt/tiles:/data

3. Traefik Routing

    Router rule must be:
    Code

    Host(`stadtschreiber.duckdns.org`)

        No PathPrefix rules

    No rewrites

    Everything under the domain goes to Tileserver

    TLS via DuckDNS resolver

4. config.json — Critical Behavior

When config.json exists, Tileserver‑GL disables auto‑discovery.
You must explicitly expose paths.

Working config:
json

{
  "options": {
    "paths": {
      "root": "",
      "fonts": "fonts",
      "sprites": "sprites",
      "styles": "styles",
      "mbtiles": ""
    }
  },

  "serveOptions": {
    "paths": {
      "/sprites": "sprites"
    }
  },

  "data": {
    "basel-region": {
      "mbtiles": "basel-region.mbtiles"
    }
  },

  "styles": {
    "basel": {
      "style": "style.json",
      "tilejson": {
        "bounds": [6.9, 47.2, 8.0, 47.9],
        "center": [7.60788, 47.57158, 14]
      }
    }
  }
}
 style.json Requirements

    Source name must match MBTiles filename (without extension):

    "url": "mbtiles://basel-region"
"source": "basel-region"
Sprite URL must be relative:
Code

"sprite": "/sprites/sprite"

6. Debugging Commands

docker ps
Run tileserver with logs:
docker-compose run --rm tileserver
Restart services:
Code

docker-compose restart tileserver
docker-compose restart traefik

Test sprite availability:
Code

https://stadtschreiber.duckdns.org/sprites/sprite.png

Generieren von Schlüsselpaar (Typ RSA, 2?048 Bit) und selbst signiertem Zertifikat (SHA384withRSA) mit einer Gültigkeit von 10?000 Tagen
        für: CN=Maik Schulte-Althoff, OU=Stadtschreiber, O=Stadtschreiber, L=Basel, ST=Basel-Stadt, C=CH